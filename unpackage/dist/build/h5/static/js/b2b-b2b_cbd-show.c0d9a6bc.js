(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["b2b-b2b_cbd-show"],{"10d6":function(t,i,e){"use strict";var a=e("4ea4");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=a(e("1f05")),o={components:{skyRaty:s.default},props:{shoplist:{}},data:function(){return{list:{}}},created:function(){},methods:{goShop:function(t){uni.navigateTo({url:"../../b2b/b2b_shop/index?shopid="+t})}}};i.default=o},"14b0":function(t,i,e){"use strict";var a=e("4ea4");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=a(e("c5aa")),o=a(e("c623")),n=(e("26cb"),{components:{b2bSortbox:o.default,shopItem:s.default},data:function(){return{pageLoad:!1,pageData:{},catid:0,cbdid:0,isFirst:!0,per_page:0,shopList:{},discount:"",price:"",choice:"",orderby:""}},onLoad:function(t){this.cbdid=t.cbdid,this.getPage()},onPageScroll:function(t){this.$store.commit("setScrollTop",t.scrollTop)},methods:{sortParent:function(t){this.discount=t.discount,this.price=t.price,this.choice=t.choice,this.orderby=t.orderby,this.per_page=0,this.isFirst=!0,console.log(t),this.getList()},goShop:function(t){uni.navigateTo({url:"../b2b_shop/index?shopid="+t})},getPage:function(){var t=this,i=this.app.getGps();t.app.get({url:t.app.apiHost+"/module.php?m=b2b_cbd&a=show&cbdid="+this.cbdid,data:{lat:i.lat,lng:i.lng},dataType:"json",success:function(i){uni.setNavigationBarTitle({title:i.data.cbd.title}),t.shopList=i.data.list,t.pageData=i.data,t.pageLoad=!0}})},getList:function(){var t=this;if(0==t.per_page&&!t.isFirst)return!1;var i=this.app.getGps();t.app.get({url:t.app.apiHost+"/module.php?m=b2b_cbd&a=show&cbdid="+this.cbdid,data:{discount:t.discount,price:t.price,choice:t.choice,orderby:t.orderby,lat:i.lat,lng:i.lng},dataType:"json",success:function(i){if(t.per_page=i.data.per_page,t.isFirst)t.isFirst=!1,t.shopList=i.data.list;else{var e=t.shopList;for(var a in i.data.list)e.push(i.data.list[a]);t.shopList=e}}})}}});i.default=n},"16b4":function(t,i,e){"use strict";var a;e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return a}));var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"bg-white pd-5"},t._l(t.shoplist,(function(i,a){return e("div",{key:a,staticClass:"flexlist-item pointer",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goShop(i.shopid)}}},[e("v-uni-image",{staticClass:"flexlist-img bd-radius-50",attrs:{mode:"widthFix",src:i.imgurl+".100x100.jpg"}}),e("div",{staticClass:"flex-1"},[e("div",{staticClass:"flexlist-title"},[t._v(t._s(i.shopname))]),e("sky-raty",{attrs:{len:"5",mod:"2",readonly:"1",grade:i.raty_grade,label:"评价"}}),i.prolist?e("div",{staticClass:"flex"},t._l(i.prolist,(function(t,i){return e("div",{key:i,staticClass:"mgr-5"},[e("img",{staticClass:"wh-60 mgb-5",attrs:{src:t.imgurl+".100x100.jpg"}})])})),0):t._e()],1)],1)})),0)},o=[]},"1f05":function(t,i,e){"use strict";e.r(i);var a=e("db16"),s=e("cd6d");for(var o in s)"default"!==o&&function(t){e.d(i,t,(function(){return s[t]}))}(o);e("25c6");var n,c=e("f0c5"),r=Object(c["a"])(s["default"],a["b"],a["c"],!1,null,"0169959e",null,!1,a["a"],n);i["default"]=r.exports},"25c6":function(t,i,e){"use strict";var a=e("dd96"),s=e.n(a);s.a},"29cf":function(t,i,e){var a=e("6b25");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=e("4f06").default;s("fa43ca02",a,!0,{sourceMap:!1,shadowMode:!1})},"30ce":function(t,i,e){"use strict";var a=e("ea55"),s=e.n(a);s.a},"466e":function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,".raty-num[data-v-0169959e]{margin-left:3px}",""]),t.exports=i},"4be2":function(t,i,e){"use strict";var a=e("29cf"),s=e.n(a);s.a},"57fb":function(t,i,e){"use strict";var a=e("b7a1"),s=e.n(a);s.a},"5b01":function(t,i,e){"use strict";e("e25e"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a={props:{len:0,grade:0,label:"",mod:0,fields:"",readonly:0},data:function(){return{num:0,items:[],gradeItems:[],half:!1,gclass:"mgb-10"}},watch:{num:function(t,i){this.$emit("call-parent",t)}},created:function(){console.log(this.label),void 0!=this.groupclass&&(this.gclass=this.groupclass);var t=[],i=this.len;0==i&&(i=5);for(var e=0;e<i;e++)t.push(e);this.items=t;var a=1;void 0!=this.mod&&(a=this.mod),this.grade%a!=0&&(console.log("mod"),this.half=!0);var s=parseInt(this.grade/a),o=[];for(e=0;e<s;e++)o.push(e);this.num=this.grade,this.gradeItems=o},methods:{setRaty:function(t){if(this.readonly)return!1;for(var i=[],e=t+1,a=0;a<e;a++)i.push(a);var s=1;void 0!=this.mod&&(s=this.mod),this.num=e*s,this.half=!1,this.gradeItems=i}}};i.default=a},"6b25":function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,".mgr-3[data-v-178e3768]{margin-right:3px}.shopItem[data-v-178e3768]{display:flex;flex-direction:row;margin-bottom:10px;border-bottom:1px solid #eee}.shopItem-img[data-v-178e3768]{width:70px;height:70px;margin-right:10px;border-radius:50%}.shopItem-title[data-v-178e3768]{font-size:%?40?%;margin-bottom:5px}.shopItem-ratybox[data-v-178e3768]{width:%?200?%;margin-bottom:-8px}.shopItem-zsbtn[data-v-178e3768]{background-color:#fdd060;color:#666;font-size:12px;padding:3px 6px;border-radius:5px}.shopItem-mbtn[data-v-178e3768]{border:1px solid #fc9993;padding:2px 3px;border-radius:5px;font-size:12px;-webkit-transform:scale(.8);transform:scale(.8);-webkit-transform-origin:0 0;transform-origin:0 0;box-sizing:border-box;margin-right:-10px;color:#fc9993}.scalem2[data-v-178e3768]{-webkit-transform:scale(.7);transform:scale(.7);-webkit-transform-origin:0 12px;transform-origin:0 12px}",""]),t.exports=i},"7b16":function(t,i,e){"use strict";e.r(i);var a=e("14b0"),s=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(i,t,(function(){return a[t]}))}(o);i["default"]=s.a},"8b7f":function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,'.sortNavBox[data-v-c662952a]{position:relative;left:0;right:0;background-color:#fff;z-index:999}.sortNavBoxFix[data-v-c662952a]{position:fixed;top:0}\n.sortNavBoxFix[data-v-c662952a]{top:44px}\n.sortNav[data-v-c662952a]{display:flex;flex-direction:row;height:40px;background-color:#fff;border-top:1px solid #eee;border-bottom:1px solid #eee;margin-bottom:5px;padding:0 10px}.sortNav-active[data-v-c662952a]{font-weight:bolder}.sortNav-item[data-v-c662952a]{flex:1;text-align:center;align-items:center;position:relative;height:40px;line-height:40px;justify-content:center}.sortNavBox-order[data-v-c662952a]{position:absolute;left:0;right:0;top:40px;padding:0 10px;background-color:#fff;z-index:999;display:none}.zhpx[data-v-c662952a]{width:120px;flex:none}.zhpx[data-v-c662952a]:after{content:" ";display:inline-block;width:8px;height:8px;border-top:1px solid #e4e4e4;border-left:1px solid #e4e4e4;position:absolute;left:45%;bottom:-8%;z-index:5;background-color:#fff;-webkit-transform:translateX(-50%) rotate(45deg);transform:translateX(-50%) rotate(45deg)}.bItem[data-v-c662952a]{height:42px;line-height:42px;border-bottom:1px solid #eee}.choiceBox[data-v-c662952a]{position:fixed;z-index:999;left:0;right:0;top:45px;bottom:120px;background-color:#fff;padding:10px;display:none}\n.choiceBox[data-v-c662952a]{top:85px}\n.choiceBox-hd[data-v-c662952a]{margin-bottom:10px;font-size:14px;font-weight:bolder;padding-left:5px}.choice-item[data-v-c662952a]{width:33.333%;padding:0 5px;box-sizing:border-box}.choice-item-active[data-v-c662952a]{color:#f30!important}.btn3[data-v-c662952a]{background-color:#eee;padding:4px 6px;color:#666}.choiceBtns[data-v-c662952a]{position:absolute;bottom:10px;left:0;right:0}.qkBtn[data-v-c662952a],.wcBtn[data-v-c662952a]{flex:1;height:36px;line-height:36px;text-align:center}.qkBtn[data-v-c662952a]{background-color:#fafafa}.wcBtn[data-v-c662952a]{background-color:#ffd161}.scItem[data-v-c662952a]{width:%?240?%;margin-right:%?10?%;overflow:hidden}.scItem-img[data-v-c662952a]{width:%?240?%;height:%?160?%;border-radius:%?20?%;margin-bottom:3px}.scItem-title[data-v-c662952a]{font-size:12px;color:#333;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;margin-bottom:5px}.scItem-desc[data-v-c662952a]{font-size:12px;color:#666}.sortNav-active[data-v-c662952a]{font-weight:bolder}',""]),t.exports=i},"8beb":function(t,i,e){"use strict";e.r(i);var a=e("9267"),s=e("7b16");for(var o in s)"default"!==o&&function(t){e.d(i,t,(function(){return s[t]}))}(o);e("57fb");var n,c=e("f0c5"),r=Object(c["a"])(s["default"],a["b"],a["c"],!1,null,"2d89f467",null,!1,a["a"],n);i["default"]=r.exports},"91c0":function(t,i,e){"use strict";e.r(i);var a=e("d26d"),s=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(i,t,(function(){return a[t]}))}(o);i["default"]=s.a},9267:function(t,i,e){"use strict";var a;e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return a}));var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[e("v-uni-view",{staticClass:"main-body"},[e("v-uni-view",{staticStyle:{height:"44px"}}),e("b2b-sortbox",{attrs:{pfixed:"true",pstyle:""},on:{"call-parent":function(i){arguments[0]=i=t.$handleEvent(i),t.sortParent.apply(void 0,arguments)}}}),e("shop-item",{attrs:{shoplist:t.shopList}})],1)],1)},o=[]},9932:function(t,i,e){"use strict";e.r(i);var a=e("10d6"),s=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(i,t,(function(){return a[t]}))}(o);i["default"]=s.a},a511:function(t,i,e){"use strict";var a;e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return a}));var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[e("v-uni-view",{staticClass:"modal-mask none",class:t.zhpxBoxClass,on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.zhpxBoxClass=""}}}),e("v-uni-view",{staticClass:"modal-mask none",class:t.choiceBoxClass,on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.choiceBoxClass=""}}}),e("v-uni-view",{staticClass:"sortNavBox",class:t.pfixed||t.scrollTop>=t.sortTop?"sortNavBoxFix":"",style:t.pstyle,attrs:{id:"sortNavBox"}},[e("v-uni-view",{staticClass:"sortNav"},[e("v-uni-view",{staticClass:"sortNav-item w100 flex zhpx",class:"zhpx"==t.orderTab?"sortNav-active":"",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toggleOrder.apply(void 0,arguments)}}},[e("span",[t._v(t._s(t.orderLabel))]),e("span",{staticClass:"tab-select-t3down"})]),e("v-uni-view",{staticClass:"sortNav-item",class:"sold_num"==t.orderTab?"sortNav-active":"",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.setOrderTab("sold_num")}}},[t._v("销量最高")]),e("v-uni-view",{staticClass:"sortNav-item",class:"distance"==t.orderTab?"sortNav-active":"",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.setOrderTab("distance")}}},[t._v("距离最近")]),e("v-uni-view",{staticClass:"sortNav-item flex",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.setOrderTab("choice")}}},[t._v("筛选"),e("span",{staticClass:"iconfont icon-filter"})])],1),e("v-uni-view",{staticClass:"sortNavBox-order",class:t.zhpxBoxClass},t._l(t.orderList,(function(i,a){return e("v-uni-view",{key:a,staticClass:"bItem",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setOrder(i,a)}}},[t._v(t._s(i))])})),1),e("v-uni-view",{staticClass:"choiceBox",class:t.choiceBoxClass},[e("v-uni-scroll-view",{attrs:{"scroll-y":!0}},[e("v-uni-view",{staticClass:"mgb-10"},[e("v-uni-view",{staticClass:"choiceBox-hd flex"},[t._v("商家特色"),e("v-uni-text",{staticClass:"cl3 f12"},[t._v("(可多选)")])],1),e("v-uni-view",{staticClass:"flex"},t._l(t.choiceClass,(function(i,a){return e("v-uni-view",{key:a,staticClass:"choice-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.checkChoice(i.id)}}},[e("v-uni-view",{staticClass:"btn3",class:i.classname},[t._v(t._s(i.name))])],1)})),1)],1),e("v-uni-view",{staticClass:"mgb-10"},[e("v-uni-view",{staticClass:"choiceBox-hd"},[t._v("人均价")]),e("v-uni-view",{staticClass:"flex"},t._l(t.priceList,(function(i,a){return e("v-uni-view",{key:a,staticClass:"choice-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setPrice(i)}}},[e("v-uni-view",{staticClass:"btn3",class:i==t.priceItem?"choice-item-active":""},[t._v(t._s(i))])],1)})),1)],1),e("v-uni-view",{staticClass:"mgb-20"},[e("v-uni-view",{staticClass:"choiceBox-hd"},[t._v("优惠活动")]),e("v-uni-view",{staticClass:"flex"},t._l(t.discList,(function(i,a,s){return e("v-uni-view",{key:s,staticClass:"choice-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.setDisc(a)}}},[e("v-uni-view",{staticClass:"btn3",class:a==t.discItem?"choice-item-active":""},[t._v(t._s(i))])],1)})),1)],1)],1),e("v-uni-view",{staticClass:"flex choiceBtns"},[e("v-uni-view",{staticClass:"qkBtn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.choiceClear.apply(void 0,arguments)}}},[t._v("清空")]),e("v-uni-view",{staticClass:"wcBtn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.choiceFinish.apply(void 0,arguments)}}},[t._v("完成")])],1)],1)],1)],1)},o=[]},a9d2:function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,"",""]),t.exports=i},b7a1:function(t,i,e){var a=e("a9d2");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=e("4f06").default;s("36c2c844",a,!0,{sourceMap:!1,shadowMode:!1})},c5aa:function(t,i,e){"use strict";e.r(i);var a=e("16b4"),s=e("9932");for(var o in s)"default"!==o&&function(t){e.d(i,t,(function(){return s[t]}))}(o);e("4be2");var n,c=e("f0c5"),r=Object(c["a"])(s["default"],a["b"],a["c"],!1,null,"178e3768",null,!1,a["a"],n);i["default"]=r.exports},c623:function(t,i,e){"use strict";e.r(i);var a=e("a511"),s=e("91c0");for(var o in s)"default"!==o&&function(t){e.d(i,t,(function(){return s[t]}))}(o);e("30ce");var n,c=e("f0c5"),r=Object(c["a"])(s["default"],a["b"],a["c"],!1,null,"c662952a",null,!1,a["a"],n);i["default"]=r.exports},cd6d:function(t,i,e){"use strict";e.r(i);var a=e("5b01"),s=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(i,t,(function(){return a[t]}))}(o);i["default"]=s.a},d26d:function(t,i,e){"use strict";var a=e("4ea4");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=a(e("5530")),o=e("26cb"),n={name:"b2b-sortbox",props:{pstyle:"",pfixed:!1},computed:(0,s.default)({},(0,o.mapState)({scrollTop:function(t){return t.scrollTop}})),data:function(){return{sortTop:1e3,orderLabel:"综合排序",sortNavBoxFix:"",zhpxBoxClass:"",orderTab:"zhpx",choiceBoxClass:"",orderby:"",orderList:"",isFirst:!0,per_page:0,choiceClass:[],priceList:[],priceItem:"",discList:[],discItem:""}},created:function(){uni.createSelectorQuery().in(this),this.getFilter()},methods:{choiceFinish:function(){this.isFirst=!0,this.per_page=0,this.choiceBoxClass="",this.getList()},choiceClear:function(){var t=this,i=this.choiceClass;for(var e in i)i[e].classname="";t.choiceClass=i,t.discItem="",t.priceItem=""},setDisc:function(t){this.discItem==t?this.discItem="":this.discItem=t},setPrice:function(t){this.priceItem==t?this.priceItem="":this.priceItem=t},checkChoice:function(t){var i=this.choiceClass;for(var e in i)i[e].id==t&&(""==i[e].classname?i[e].classname="choice-item-active":i[e].classname="");this.choiceClass=i},setOrder:function(t,i){this.zhpxBoxClass="",this.orderLabel=t,this.orderTab="zhpx",this.orderby=i,this.per_page=0,this.isFirst=!0,this.getList()},setOrderTab:function(t){this.orderTab=t,this.orderby=t,this.zhpxBoxClass="",this.per_page=0,this.isFirst=!0,"choice"==t?""==this.choiceBoxClass?(this.choiceBoxClass="block",uni.pageScrollTo({scrollTop:this.sortTop})):this.choiceBoxClass="":(this.choiceBoxClass="",this.getList())},toggleOrder:function(){this.choiceBoxClass="",""==this.zhpxBoxClass?(this.zhpxBoxClass="block",uni.pageScrollTo({scrollTop:this.sortTop})):this.zhpxBoxClass=""},getFilter:function(){var t=this;t.app.get({url:t.app.apiHost+"/module.php?m=b2b_shoplist&a=Filter&ajax=1",success:function(i){t.orderList=i.data.orderList,t.discList=i.data.discList,t.priceList=i.data.priceList;var e=Array();for(var a in i.data.filterList)e.push({id:a,name:i.data.filterList[a],classname:""});t.choiceClass=e,setTimeout((function(){t.sortTop=document.getElementById("sortNavBox").offsetTop}),300)}})},getList:function(){var t=this,i="";for(var e in t.choiceClass)""!=t.choiceClass[e].classname&&(""!=i&&(i+=","),i+=t.choiceClass[e].id);var a={discount:t.discItem,price:t.priceItem,choice:i,orderby:t.orderby};this.$emit("call-parent",a)}}};i.default=n},db16:function(t,i,e){"use strict";var a;e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return a}));var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[e("v-uni-view",{staticClass:"raty-group",class:t.gclass},[t.label.length>0?e("v-uni-view",{staticClass:"raty-label"},[t._v(t._s(t.label))]):t._e(),e("v-uni-input",{staticClass:"raty-value none",attrs:{type:"text",name:t.fields,value:t.num}}),e("v-uni-view",{staticClass:"raty-row"},[e("v-uni-view",{staticClass:"raty-item"},[t._l(t.items,(function(i,a){return e("v-uni-view",{key:a,staticClass:"raty-no",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.setRaty(a)}}})})),e("v-uni-view",{staticClass:"raty-num"},[t._v(t._s(t.num))])],2),e("v-uni-view",{staticClass:"raty-item"},t._l(t.gradeItems,(function(i,a){return e("v-uni-view",{key:a,staticClass:"raty-yes",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.setRaty(a)}}})})),1)],1)],1)],1)},o=[]},dd96:function(t,i,e){var a=e("466e");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=e("4f06").default;s("6f299052",a,!0,{sourceMap:!1,shadowMode:!1})},ea55:function(t,i,e){var a=e("8b7f");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=e("4f06").default;s("bf29d180",a,!0,{sourceMap:!1,shadowMode:!1})}}]);