(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["b2b-b2b_product-index"],{"448d":function(t,a,i){var s=i("24fb");a=s(!1),a.push([t.i,".side[data-v-00c01f44]{position:fixed;top:%?96?%;left:%?0?%;width:%?200?%;bottom:%?110?%;background-color:#fff}.side-menu[data-v-00c01f44]{cursor:pointer;padding:%?22?% %?11?%;border-bottom:%?2?% solid #eee;color:#646464;font-size:16px}.main[data-v-00c01f44]{margin-left:%?205?%}",""]),t.exports=a},"4e73":function(t,a,i){"use strict";var s=i("6277"),n=i.n(s);n.a},"5c5d":function(t,a,i){"use strict";i.r(a);var s=i("fcc7"),n=i("bfbf");for(var e in n)"default"!==e&&function(t){i.d(a,t,(function(){return n[t]}))}(e);var o,c=i("f0c5"),u=Object(c["a"])(n["default"],s["b"],s["c"],!1,null,"bb29ce6c",null,!1,s["a"],o);a["default"]=u.exports},6277:function(t,a,i){var s=i("448d");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var n=i("4f06").default;n("415eec88",s,!0,{sourceMap:!1,shadowMode:!1})},"68b5":function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var s={props:{tab:""},data:function(){return{list:""}},methods:{goCategory:function(){uni.reLaunch({url:"../../b2b/b2b_category/index"})},goHome:function(){uni.reLaunch({url:"../../pages/index/index"})},goCart:function(){uni.reLaunch({url:"../../b2b/b2b_cart/index"})},goOrder:function(){uni.reLaunch({url:"../../b2b/b2b_order/my"})},goUser:function(){uni.reLaunch({url:"../../b2b/b2b_user/index"})}}};a.default=s},a221:function(t,a,i){"use strict";var s;i.d(a,"b",(function(){return n})),i.d(a,"c",(function(){return e})),i.d(a,"a",(function(){return s}));var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("v-uni-view",[i("v-uni-view",{staticClass:"side",style:{top:t.sideTop+"px"}},[i("v-uni-view",{staticClass:"side-menu",class:t.catActive,on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.setCat(0)}}},[t._v("推荐")]),t._l(t.pageData.catList,(function(a,s){return i("v-uni-view",{key:s,staticClass:"side-menu",class:a.isactive?"cl-money":"",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.setCat(a.catid)}}},[t._v(t._s(a.title))])}))],2),i("v-uni-view",{staticClass:"main"},[i("v-uni-view",{staticClass:"flexlist"},t._l(t.pageData.list,(function(a,s){return i("v-uni-view",{key:s,staticClass:"flexlist-item"},[i("img",{staticClass:"flexlist-img pointer bd-radius-5",attrs:{src:a.imgurl},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goProduct(a.id)}}}),i("v-uni-view",{staticClass:"flex-1"},[i("v-uni-view",{staticClass:"flexlist-title pointer",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goProduct(a.id)}}},[t._v(t._s(a.title))]),i("v-uni-view",{staticClass:"flex mgb-5"},[i("v-uni-view",{staticClass:"flex-1 cl3"},[t._v("库存 "+t._s(a.total_num))]),i("v-uni-view",{staticClass:"cl3"},[t._v("已售 "+t._s(a.buy_num))])],1),i("v-uni-view",{staticClass:"flex"},[i("v-uni-view",{staticClass:"flex-1"}),a.isksid>0?i("v-uni-view",[i("v-uni-view",{staticClass:"btn-small btn-outline-success",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.ksBox(a.id)}}},[t._v("选规格")])],1):i("v-uni-view",{staticClass:"pdb-5"},[a.incart?i("v-uni-view",{staticClass:"numbox prolist-numbox"},[i("v-uni-view",{staticClass:"numbox-minus",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.minusCart(a.id,a.cart_amount)}}},[t._v("-")]),i("v-uni-input",{staticClass:"numbox-num",attrs:{type:"text",name:"amount",value:a.cart_amount}}),i("v-uni-view",{staticClass:"numbox-plus",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.plusCart(a.id,a.cart_amount)}}},[t._v("+")])],1):i("v-uni-view",{staticClass:"btn-buy  iconfont icon-cart",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.addCart(a.id)}}})],1)],1)],1)],1)})),1),t.ksShow?i("v-uni-view",[i("v-uni-view",{staticClass:"modal-mask",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.ksHide.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"modal"},[i("v-uni-view",{staticClass:"modal-header"},[i("v-uni-view",{staticClass:"modal-title"},[t._v("选择款式")]),i("v-uni-view",{staticClass:"modal-close icon-close",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.ksHide.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"modal-body pdt-10"},[i("v-uni-view",{staticClass:"ksBox mgb-10"},[i("v-uni-view",{staticClass:"kslist mgb-10"},[i("v-uni-view",{staticClass:"kslist-label"},[t._v(t._s(t.ksproduct.ks_label_name))]),t._l(t.ksList,(function(a,s){return i("v-uni-view",{key:s,staticClass:"kslist-item",class:{"kslist-active":a.id==t.ksid1},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.ks1(a.id)}}},[t._v(t._s(a.title))])}))],2),i("v-uni-view",{staticClass:"kslist"},[i("v-uni-view",{staticClass:"kslist-label"},[t._v(t._s(t.ksproduct.ks_label_size))]),t._l(t.ksList2,(function(a,s){return i("v-uni-view",{key:s,staticClass:"kslist-item",class:{"kslist-active":a.id==t.ksid},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.ks2(a.id)}}},[t._v(t._s(a.size))])}))],2)],1),i("v-uni-view",{staticClass:"flex"},[i("v-uni-view",{staticClass:"cl2 mgr-10 mgl-10"},[t._v("价格")]),i("v-uni-view",{staticClass:"cl-money"},[t._v("￥"+t._s(t.ksproduct.price))]),i("v-uni-view",{staticClass:"flex-1"}),t.ksproduct.incart?i("v-uni-view",{staticClass:"numbox prolist-numbox"},[i("v-uni-view",{staticClass:"numbox-minus",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.ksMinusCart(t.ksproduct.id,t.ksproduct.cart_amount)}}},[t._v("-")]),i("v-uni-input",{staticClass:"numbox-num",attrs:{type:"text",name:"amount",value:t.ksproduct.cart_amount}}),i("v-uni-view",{staticClass:"numbox-plus",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.ksPlusCart(t.ksproduct.id,t.ksproduct.cart_amount)}}},[t._v("+")])],1):i("v-uni-view",{staticClass:"btn-buy iconfont icon-cart",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.ksAddCart(t.ksproduct.id)}}})],1)],1)],1)],1):t._e()],1),i("b2b-footer",{attrs:{tab:"product"}})],1)},e=[]},a583:function(t,a,i){"use strict";var s=i("4ea4");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=s(i("5c5d")),e=0,o={components:{b2bFooter:n.default},data:function(){return{pageData:{},pageLoad:!1,sideTop:44,show:"flex",catActive:"cl-money",ksShow:!1,ksproduct:[],ksList:[],ksList2:[],ksid:0,ksid1:0,ksid2:0}},onLoad:function(){uni.setNavigationBarTitle({title:"点餐"}),this.getPage()},methods:{goProduct:function(t){uni.navigateTo({url:"../b2b_product/show?id="+t})},getPage:function(){var t=this;t.app.get({url:t.app.apiHost+"/module.php?m=b2b_product&ajax=1",success:function(a){t.pageData=a.data,t.pageLoad=!0}})},getList:function(){var t=this;t.app.get({url:t.app.apiHost+"/module.php?m=b2b_product&ajax=1",data:{catid:e},dataType:"json",success:function(a){for(var i in a.data.catList)a.data.catList[i].catid==e?a.data.catList[i].isactive=1:a.data.catList[i].isactive=0;t.pageData=a.data}})},setCat:function(t){var a=this;e=t,a.catActive=0==e?"cl-money":"",this.getList()},addCart:function(t,a){var i=this,s=(t=t,a=void 0==a?0:a,1);i.app.get({url:i.app.apiHost+"/module.php?m=b2b_cart&a=add&ajax=1",data:{productid:t,amount:s,ksid:a},success:function(a){if(a.error)return uni.showToast({title:a.message}),!1;for(var s=i.pageData.list,n=0;n<s.length;n++)if(s[n].id==t){a.data.amount>0&&(s[n].incart=1),s[n].cart_amount=a.data.amount;break}i.pageData.list=i.parseList(s)}})},plusCart:function(t,a,i){var s=this;t=t,a=a,i=void 0==i?0:i;a++,s.app.get({url:s.app.apiHost+"/module.php?m=b2b_cart&a=add&ajax=1",data:{productid:t,amount:a,ksid:i},success:function(a){if(a.error)return uni.showToast({title:a.message}),!1;for(var i=s.pageData.list,n=0;n<i.length;n++)if(i[n].id==t){i[n].cart_amount=a.data.amount;break}s.pageData.list=s.parseList(i)}})},minusCart:function(t,a,i){var s=this;t=t,a=a,i=void 0==i?0:i;a--;var n=0;0==a&&(n=1),s.app.get({url:s.app.apiHost+"/module.php?m=b2b_cart&a=add&ajax=1",data:{productid:t,amount:a,ksid:i,isdelete:n},success:function(a){if(a.error)return uni.showToast({title:a.message}),!1;for(var i=s.pageData.list,n=0;n<i.length;n++)if(i[n].id==t){0==a.data.amount&&(i[n].incart=0),i[n].cart_amount=a.data.amount;break}s.pageData.list=s.parseList(i)}})},parseList:function(t){for(var a=0;a<t.length;a++)t[a].cart_num>0?t[a].cart_num_class="prolist-item-row-cart-active":t[a].cart_num_class="";return t},ksBox:function(t){var a=this;a.app.get({url:a.app.apiHost+"/module.php?m=b2b_product_ks&ajax=1&productid="+t,dataType:"json",success:function(t){if(t.error)return uni.showToast({title:t.message}),!1;a.ksShow=!0,a.ksproduct=t.data.product,a.ksList=t.data.ksList,a.ksList2=t.data.ksList2,a.ksid1=t.data.ksid,a.ksid=t.data.ksid}})},ksHide:function(){this.ksid=0,this.ksShow=!1},ks1:function(t){var a=this;a.app.get({url:a.app.apiHost+"/module.php?m=b2b_product_ks&a=sizeList&ajax=1&id="+t,success:function(t){if(t.error)return uni.showToast({title:t.message}),!1;a.ksid1=t.data.ksid,a.ksid=t.data.ksid,a.ksproduct=t.data.product,a.ksList2=t.data.ksList2}})},ks2:function(t){var a=this;a.ksid=t,a.app.get({url:a.app.apiHost+"/module.php?m=b2b_product_ks&a=get&ajax=1&id="+t,success:function(t){if(t.error)return uni.showToast({title:t.message}),!1;a.ksproduct=t.data.product}})},ksAddCart:function(t){var a=this,i=(t=t,a.ksid),s=1;a.app.get({url:a.app.apiHost+"/module.php?m=b2b_cart&a=add&ajax=1",data:{productid:t,amount:s,ksid:i},success:function(t){if(t.error)return uni.showToast({title:t.message}),!1;a.ksproduct.incart=1,a.ksproduct.cart_amount=t.data.amount}})},ksPlusCart:function(t,a){var i=this,s=(t=t,a=a,i.ksid);a++,i.app.get({url:i.app.apiHost+"/module.php?m=b2b_cart&a=add&ajax=1",data:{productid:t,amount:a,ksid:s},success:function(t){if(t.error)return uni.showToast({title:t.message}),!1;i.ksproduct.cart_amount=t.data.amount}})},ksMinusCart:function(t,a){var i=this,s=(t=t,a=a,i.ksid);a--;var n=0;0==a&&(n=1),i.app.get({url:i.app.apiHost+"/module.php?m=b2b_cart&a=add&ajax=1",data:{productid:t,amount:a,ksid:s,isdelete:n},success:function(t){if(t.error)return uni.showToast({title:t.message}),!1;0==t.data.amount?(i.ksproduct.cart_amount=0,i.ksproduct.incart=0):i.ksproduct.cart_amount=t.data.amount}})}}};a.default=o},bc47:function(t,a,i){"use strict";i.r(a);var s=i("a221"),n=i("c6f8");for(var e in n)"default"!==e&&function(t){i.d(a,t,(function(){return n[t]}))}(e);i("4e73");var o,c=i("f0c5"),u=Object(c["a"])(n["default"],s["b"],s["c"],!1,null,"00c01f44",null,!1,s["a"],o);a["default"]=u.exports},bfbf:function(t,a,i){"use strict";i.r(a);var s=i("68b5"),n=i.n(s);for(var e in s)"default"!==e&&function(t){i.d(a,t,(function(){return s[t]}))}(e);a["default"]=n.a},c6f8:function(t,a,i){"use strict";i.r(a);var s=i("a583"),n=i.n(s);for(var e in s)"default"!==e&&function(t){i.d(a,t,(function(){return s[t]}))}(e);a["default"]=n.a},fcc7:function(t,a,i){"use strict";var s;i.d(a,"b",(function(){return n})),i.d(a,"c",(function(){return e})),i.d(a,"a",(function(){return s}));var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("v-uni-view",[i("v-uni-view",{staticClass:"footer-row"}),i("div",{staticClass:"footer"},[i("div",{staticClass:"footer-item icon-home",class:{"footer-active":"index"==t.tab},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goHome()}}},[t._v("首页")]),i("div",{staticClass:"footer-item icon-cascades",class:{"footer-active":"category"==t.tab},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goCategory()}}},[t._v("分类")]),i("div",{staticClass:"footer-item icon-cart",class:{"footer-active":"cart"==t.tab},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goCart()}}},[t._v("购物车")]),i("div",{staticClass:"footer-item icon-my_light ",class:{"footer-active":"user"==t.tab},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goUser()}}},[t._v("我的")])])],1)},e=[]}}]);