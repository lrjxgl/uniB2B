(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["b2b-b2b_order-confirm"],{"474e":function(a,t,i){"use strict";var e;i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return e}));var s=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("v-uni-view",[a.pageLoad?i("v-uni-form",{attrs:{id:"orderForm"},on:{submit:function(t){arguments[0]=t=a.$handleEvent(t),a.formSubmit.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"none"},[i("v-uni-input",{attrs:{type:"text",name:"shopid",value:a.shopid}})],1),i("v-uni-view",{staticClass:"row-box mgb-5"},[i("v-uni-view",{staticClass:"row-box-hd"},[i("v-uni-view",{staticClass:"flex-1 f16"},[a._v("收货地址")]),i("v-uni-navigator",{staticClass:"row-box-more",attrs:{url:"../../pages/user_address/add"}},[a._v("新增地址")])],1),i("v-uni-input",{staticClass:"none",attrs:{type:"text",name:"user_address_id",value:a.pageData.user_address_id}}),i("v-uni-radio-group",{on:{change:function(t){arguments[0]=t=a.$handleEvent(t),a.changeAddr.apply(void 0,arguments)}}},a._l(a.pageData.addrList,(function(t,e){return i("v-uni-view",{key:e,staticClass:"row-item-text"},[i("v-uni-radio",{attrs:{checked:t.id==a.pageData.user_address_id,value:t.id+""}}),a._v(a._s(t.truename)+" "+a._s(t.telephone)),i("br"),a._v(a._s(t.pct_address))],1)})),1)],1),i("v-uni-view",{staticClass:"row-box mgb-5"},[i("v-uni-input",{staticClass:"none",attrs:{type:"hidden",name:"shopid",value:a.pageData.shop.shopid}}),i("v-uni-view",{staticClass:"flex  flex-ai-center",on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.goShop(a.pageData.shop.shopid)}}},[i("img",{staticClass:"wh-40  bd-radius-50  mgr-5",attrs:{src:a.pageData.shop.imgurl+".100x100.jpg"}}),i("v-uni-view",{staticClass:"flex-1 f16"},[a._v(a._s(a.pageData.shop.shopname))]),i("v-uni-view",[i("v-uni-navigator",{staticClass:"btn-round wh-40  btn-icon icon-service",attrs:{url:"../b2b_guest/user?shopid="+a.pageData.shop.shopid}})],1)],1)],1),i("v-uni-view",{staticClass:"row-box mgb-5"},[i("v-uni-view",{staticClass:"row-box-hd"},[a._v("产品列表")]),a._l(a.pageData.cartList,(function(t,e){return i("v-uni-view",{key:e,staticClass:"flexlist-item"},[i("v-uni-input",{staticClass:"none",attrs:{type:"text",name:"cartid["+e+"]",value:t.id}}),i("img",{staticClass:"flexlist-img",attrs:{src:t.imgurl+".100x100.jpg"}}),i("v-uni-view",{staticClass:"flex-1"},[i("v-uni-view",{staticClass:"flexlist-title"},[a._v(a._s(t.title))]),i("v-uni-view",{staticClass:"mgb-5 cl2"},[a._v(a._s(t.ks_title))]),i("v-uni-view",{staticClass:"flex"},[i("v-uni-view",{staticClass:"flex-1 cl-money"},[a._v("￥"+a._s(t.price))]),i("v-uni-view",{},[a._v("* "+a._s(t.amount))])],1)],1)],1)}))],2),i("v-uni-view",{staticClass:"row-box mgb-5"},[i("v-uni-view",{staticClass:"flex flex-wrap flex-ai-center"},[i("v-uni-view",[a._v("共"+a._s(a.pageData.total_num)+"件商品，货价：￥ "+a._s(a.pageData.goods_money)+"元 \n\t\t\t邮费：￥ "+a._s(a.pageData.express_money)+" 元")]),i("v-uni-view",[a._v("总价：￥"+a._s(a.pageData.total_money))])],1)],1),i("v-uni-view",{staticClass:"row-box mgb-5"},[i("v-uni-view",{staticClass:"row-box-hd mgb-5"},[a._v("优惠券")]),i("v-uni-view",{staticClass:"radioList-group"},[i("v-uni-input",{staticClass:"radioList-value none",attrs:{type:"text",name:"coupon_id",value:a.coupon_id}}),a._l(a.pageData.couponList,(function(t,e){return[i("v-uni-view",{key:e+"_0",staticClass:"radioList-item",class:{"radioList-item-active":a.coupon_id==t.id},on:{click:function(i){arguments[0]=i=a.$handleEvent(i),a.setCoupon(t.id)}}},[a._v(a._s(t.title))])]}))],2)],1),i("v-uni-view",{staticClass:"row-box mgb-5"},[i("v-uni-view",{staticClass:"row-box-hd mgb-10"},[a._v("支付方式")]),i("v-uni-view",{staticClass:"paylist"},[i("v-uni-input",{staticClass:"none",attrs:{type:"text",name:"paytype",id:"paytype",value:a.pageData.paytype}}),a._l(a.pageData.paytypeList,(function(t,e){return i("v-uni-view",{key:e,staticClass:"paylist-item",class:{"paylist-item-active":e==a.paytype},on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.changePaytype(e)}}},[a._v(a._s(t))])}))],2)],1),i("v-uni-view",{staticClass:"row-box"},[i("v-uni-textarea",{staticClass:"textarea-flex-text h60",attrs:{name:"comment",placeholder:"请输入订单备注"}}),i("v-uni-button",{staticClass:"btn-row-submit",attrs:{"form-type":"submit"}},[a._v("确认购买")])],1)],1):a._e()],1)},n=[]},"708a":function(a,t){a.exports={apiHost:"https://www.fd175.com/",appRoot:"https://www.fd175.com/uniapp/h5/",urlSuccess:"../b2c_order/success",urlFail:"../b2c_order/fail",paytype:"alipay",pay:function(a){window.location=a.payurl}}},ae4f:function(a,t,i){"use strict";i.r(t);var e=i("474e"),s=i("cfc5");for(var n in s)"default"!==n&&function(a){i.d(t,a,(function(){return s[a]}))}(n);var o,u=i("f0c5"),r=Object(u["a"])(s["default"],e["b"],e["c"],!1,null,"0fb7ffdb",null,!1,e["a"],o);t["default"]=r.exports},cb9a:function(a,t,i){"use strict";var e=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=e(i("708a")),n={data:function(){return{pageLoad:!1,pageData:[],user_address_id:0,coupon_id:0,shopid:0,cartid:0,pageHide:!1,paytype:"alipay"}},onLoad:function(a){console.log(a),this.cartid=a.cartid,this.shopid=a.shopid,this.getPage()},onHide:function(){this.pageHide=!0},onShow:function(){this.pageHide&&(this.pageHide=!1,this.getPage())},methods:{goShop:function(a){uni.navigateTo({url:"../b2b_shop/index?shopid="+a})},changeAddr:function(a){this.pageData.user_address_id=a.detail.value;var t=this;t.app.get({url:t.app.apiHost+"/module.php?m=b2b_order&a=confirm&ajax=1",data:{shopid:t.shopid,user_address_id:this.pageData.user_address_id},success:function(a){t.pageData=a.data}})},changePaytype:function(a){this.paytype=a},setCoupon:function(a){this.coupon_id=a},getPage:function(){var a=this;a.app.get({url:a.app.apiHost+"/module.php?m=b2b_order&a=confirm&ajax=1",data:{shopid:this.shopid,cartid:a.cartid},success:function(t){if(t.error)return uni.showToast({title:t.message}),uni.navigateBack(),!1;a.paytype=t.data.paytype,a.pageLoad=!0,a.pageData=t.data}})},formSubmit:function(a){var t=this;a.detail.value.backurl=t.app.appRoot+"#/pages/b2b_order/success",t.app.post({url:t.app.apiHost+"/module.php?m=b2b_order&a=order&ajax=1",data:a.detail.value,success:function(a){if(a.error)return uni.showToast({title:a.message}),!1;"pay"==a.data.action&&(s.default.paytype=t.paytype,s.default.urlFail="../b2b_order/fail",s.default.urlSuccess="../b2b_order/success",s.default.pay({payurl:a.data.payurl,orderno:a.data.orderno}))}})}}};t.default=n},cfc5:function(a,t,i){"use strict";i.r(t);var e=i("cb9a"),s=i.n(e);for(var n in e)"default"!==n&&function(a){i.d(t,a,(function(){return e[a]}))}(n);t["default"]=s.a}}]);