(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pageb2b/b2b_shop/index"],{"338c":function(t,a,s){"use strict";(function(t,o){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=function(){return Promise.all([s.e("common/vendor"),s.e("components/skyraty")]).then(s.bind(null,"0844"))},e=0,d={components:{skyRaty:i},data:function(){return{shop:{},pageData:{},couponList:{},pageLoad:!0,catid:0,page:"product",ratyPage:{},detailPage:{},ksShow:!1,isFav:!1,ksproduct:[],ksList:[],ksList2:[],ksid:0,ksid1:0,ksid2:0,headerMoreClass:""}},onLoad:function(a){e=a.shopid,this.getPage(),this.getProduct(),t.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#333333",animation:{duration:400,timingFunc:"easeIn"}})},methods:{favShopToggle:function(){var t=this;t.app.get({url:t.app.apiHost+"?fromapp=wxapp&m=fav&a=toggle&ajax=1",data:{objectid:e,tablename:"mod_b2b_shop"},success:function(a){"delete"==a.data?t.isFav=!1:t.isFav=!0}})},headerMoreShow:function(){this.headerMoreClass="flex-col"},headerMoreHide:function(){this.headerMoreClass=""},goOrder:function(){t.navigateTo({url:"../b2b_order/confirm?shopid="+e})},goGuest:function(){t.navigateTo({url:"../b2b_guest/user?shopid="+e})},goProduct:function(a){t.navigateTo({url:"../b2b_product/show?id="+a+"&shopid="+e})},getPage:function(){var a=this;this.app.get({url:this.app.apiHost+"/module.php?m=b2b_shop&shopid="+e,success:function(s){t.setNavigationBarTitle({title:s.data.shop.shopname}),a.couponList=s.data.couponList,a.shop=s.data.shop,a.isFav=s.data.isfav,a.pageLoad=!0}})},getProduct:function(){var t=this;this.app.get({url:this.app.apiHost+"/module.php?m=b2b_product&ajax=1&shopid="+e,data:{catid:t.catid},dataType:"json",success:function(a){t.pageData=a.data,t.pageLoad=!0}})},updateCartStat:function(){var t=this;this.app.get({url:this.app.apiHost+"/module.php?m=b2b_product&ajax=1&shopid="+e,data:{catid:t.catid},dataType:"json",success:function(a){t.pageData.cart_total_num=a.data.cart_total_num,t.pageData.cart_total_money=a.data.cart_total_money}})},getRaty:function(){var t=this;this.app.get({url:this.app.apiHost+"/module.php?m=b2b_shop&a=raty&ajax=1&shopid="+e,dataType:"json",success:function(a){t.ratyPage=a.data,t.pageLoad=!0}})},getDetail:function(){var t=this;this.app.get({url:this.app.apiHost+"/module.php?m=b2b_shop&a=detail&ajax=1&shopid="+e,dataType:"json",success:function(a){t.detailPage=a.data,t.pageLoad=!0}})},setCat:function(t){this.catid=t,this.getProduct()},setPage:function(t){switch(this.page=t,this.pageLoad=!1,console.log(o(t," at pageb2b\\b2b_shop\\index.vue:359")),t){case"raty":this.getRaty();break;case"detail":this.getDetail();break;default:this.getProduct();break}},addCart:function(a,s){var o=this,i=(a=a,s=void 0==s?0:s,1);this.app.get({url:this.app.apiHost+"/module.php?m=b2b_cart&a=add&ajax=1",data:{productid:a,amount:i,shopid:e,ksid:s},method:"GET",dataType:"json",success:function(s){if(s.error)return t.showToast({title:s.message}),!1;o.updateCartStat();for(var i=o.pageData.list,e=0;e<i.length;e++)if(i[e].id==a){s.data.amount>0&&(i[e].incart=1),i[e].cart_amount=s.data.amount;break}o.pageData.list=o.parseList(i)}})},plusCart:function(a,s,o){var i=this;a=a,s=s,o=void 0==o?0:o;s++,this.app.get({url:this.app.apiHost+"/module.php?m=b2b_cart&a=add&ajax=1",data:{productid:a,shopid:e,amount:s,ksid:o},method:"GET",dataType:"json",success:function(s){if(s.error)return t.showToast({title:s.message}),!1;i.updateCartStat();for(var o=i.pageData.list,e=0;e<o.length;e++)if(o[e].id==a){o[e].cart_amount=s.data.amount;break}i.pageData.list=i.parseList(o)}})},minusCart:function(a,s,o){var i=this;a=a,s=s,o=void 0==o?0:o;s--;var d=0;0==s&&(d=1),this.app.get({url:this.app.apiHost+"/module.php?m=b2b_cart&a=add&ajax=1",data:{productid:a,amount:s,shopid:e,ksid:o,isdelete:d},method:"GET",dataType:"json",success:function(s){if(s.error)return t.showToast({title:s.message}),!1;i.updateCartStat();for(var o=i.pageData.list,e=0;e<o.length;e++)if(o[e].id==a){0==s.data.amount&&(o[e].incart=0),o[e].cart_amount=s.data.amount;break}i.pageData.list=i.parseList(o)}})},parseList:function(t){for(var a=0;a<t.length;a++)t[a].cart_num>0?t[a].cart_num_class="prolist-item-row-cart-active":t[a].cart_num_class="";return t},ksBox:function(t){var a=this;this.app.get({url:this.app.apiHost+"/module.php?m=b2b_product_ks&ajax=1&productid="+t,dataType:"json",success:function(t){a.ksShow=!0,a.ksproduct=t.data.product,a.ksList=t.data.ksList,a.ksList2=t.data.ksList2,a.ksid1=t.data.ksid,a.ksid=t.data.ksid}})},ksHide:function(){this.ksid=0,this.ksShow=!1},ks1:function(t){var a=this;this.app.get({url:this.app.apiHost+"/module.php?m=b2b_product_ks&a=sizeList&ajax=1&id="+t,dataType:"json",success:function(t){a.ksid1=t.data.ksid,a.ksid=t.data.ksid,a.ksproduct=t.data.product,a.ksList2=t.data.ksList2}})},ks2:function(t){var a=this;a.ksid=t,this.app.get({url:this.app.apiHost+"/module.php?m=b2b_product_ks&a=get&ajax=1&id="+t,dataType:"json",success:function(t){a.ksproduct=t.data.product}})},ksAddCart:function(a){var s=this,o=(a=a,s.ksid),i=1;this.app.get({url:this.app.apiHost+"/module.php?m=b2b_cart&a=add&ajax=1",data:{productid:a,shopid:e,amount:i,ksid:o},method:"GET",dataType:"json",success:function(a){if(a.error)return t.showToast({title:a.message}),!1;s.updateCartStat(),s.ksproduct.incart=1,s.ksproduct.cart_amount=a.data.amount}})},ksPlusCart:function(a,s){var o=this,i=(a=a,s=s,o.ksid);s++,this.app.get({url:this.app.apiHost+"/module.php?m=b2b_cart&a=add&ajax=1",data:{productid:a,shopid:e,amount:s,ksid:i},method:"GET",dataType:"json",success:function(a){if(a.error)return t.showToast({title:a.message}),!1;o.updateCartStat(),o.ksproduct.cart_amount=a.data.amount}})},ksMinusCart:function(a,s){var o=this,i=(a=a,s=s,o.ksid);s--;var d=0;0==s&&(d=1),this.app.get({url:this.app.apiHost+"/module.php?m=b2b_cart&a=add&ajax=1",data:{productid:a,amount:s,shopid:e,ksid:i,isdelete:d},method:"GET",dataType:"json",success:function(a){if(a.error)return t.showToast({title:a.message}),!1;o.updateCartStat(),0==a.data.amount?(o.ksproduct.cart_amount=0,o.ksproduct.incart=0):o.ksproduct.cart_amount=a.data.amount}})}}};a.default=d}).call(this,s("6e42")["default"],s("0de9")["default"])},"521b":function(t,a,s){"use strict";s.r(a);var o=s("338c"),i=s.n(o);for(var e in o)"default"!==e&&function(t){s.d(a,t,function(){return o[t]})}(e);a["default"]=i.a},"8a84":function(t,a,s){},"8b04":function(t,a,s){"use strict";s.r(a);var o=s("d3e3"),i=s("521b");for(var e in i)"default"!==e&&function(t){s.d(a,t,function(){return i[t]})}(e);s("d2d7");var d=s("2877"),r=Object(d["a"])(i["default"],o["a"],o["b"],!1,null,null,null);a["default"]=r.exports},d2d7:function(t,a,s){"use strict";var o=s("8a84"),i=s.n(o);i.a},d3e3:function(t,a,s){"use strict";var o=function(){var t=this,a=t.$createElement;t._self._c},i=[];s.d(a,"a",function(){return o}),s.d(a,"b",function(){return i})}},[["9517","common/runtime","common/vendor"]]]);